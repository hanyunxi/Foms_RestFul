<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>新闻</title>
    <script src="../Compents/eui/eui-Script/jquery-1.11.1.js" type="text/javascript"></script>
    <script src="../Compents/js/session.js" type="text/javascript"></script>
    <style type="text/css">
        .newstitle
        {
            font-size:26px;
            font-family:微软雅黑;
            font-weight:bold;
            text-align:center;
            margin-top:30px; 
        }
        .newstimefont
        {
            font-size:15px;
            font-family:微软雅黑;
            text-align:right;
            margin-top:15px; 
            color:#999999;
            float:right;
            margin-bottom:15px;
        }
        .newstime
        {
            font-size:15px;
            font-family:微软雅黑;
            text-align:right;
            margin-top:15px; 
            margin-bottom:15px;
            color:#999999;
            float:right;
        }
        
        #a_tztb:hover
        {
            color:#2D9ACD;    
        }
        #a_xwzx:hover
        {
            color:#2D9ACD;    
        }
        
        .anextbefore
        {
            cursor:pointer;    
        }
    </style>
</head>
<body onResize="Resize()" onLoad="Resize()">
    <div style="height:100%;overflow:hidden;" id="div_newsshow">
        <div style="width:258px;height:auto;float:left;">
            <div style="background:url(../Compents/images/news/left-list-news01_03.png);width:258px;height:39px;">
                <div style="float:left;">
                    <img style="margin-top:13px;margin-left:24px;" src="../Compents/images/news/white-square-news_03.png"/>
                </div>
                <div style="float:left;margin-top:10px;margin-left:12px;">
                    <span style="font-size:14px;font-family:宋体;color:White;font-weight:bold;">新闻中心</span>
                </div>
            </div>
            <div style="width:1px;height:630px;border-left:1px solid #EEEEEE;margin-left:5px;float:left;">
               <!--<img src="../Compents/images/news/left-list-line-news_10.png" height="397px" width="1px"/>-->
            </div>
            <div style="width:240px;height:630px;float:left;">
                <div style="margin-top:32px;margin-left:15px;margin-right:11px;border-top:1px solid #EEEEEE;border-bottom:1px solid #EEEEEE;height:32px;">
                    <div style="margin-top:5px;margin-left:2px;float:left;width:9px;height:9px;">
                        <img src="../Compents/images/news/triangle-news_03.png" id="img_tztbone"/>
                        <img src="../Compents/images/news/triangle-news_03.png" id="img_tztbonemove" style="display:none;"/>
                    </div>
                    <div id="div_tjtb" style="float:left;width:180px;height:32px;text-align:center;font-family:宋体;font-size:13px;line-height:32px;color:#2D9ACD;" >
                        <a style="cursor:pointer;" id="a_tztb">通知通报</a>
                    </div>
                    <div style="float:right;margin-right:4px;margin-top:10px;width:15px;height:15px;">
                        <img src="../Compents/images/news/right-triangle-news_06.png" id="img_tztbtwo"/>
                        <img src="../Compents/images/news/right-triangle-news_06.png" id="img_tztbtwomove" style="display:none;"/>
                    </div>
                </div>
                <div style="margin-left:15px;margin-right:11px;border-bottom:1px solid #EEEEEE;height:32px;">
                    <div style="margin-top:5px;margin-left:2px;float:left;width:9px;height:9px;">
                        <img src="../Compents/images/news/triangle-news_03.png" id="img_xwzxone"  style="display:none;" />
                        <img src="../Compents/images/news/triangle-news_03.png" id="img_xwzxonemove" style="display:none;"/>
                    </div>
                    <div id="div_xwzx"  style="float:left;width:180px;height:32px;text-align:center;font-family:宋体;font-size:13px;line-height:32px;color:#666666;" >
                        <a style="cursor:pointer;" id="a_xwzx">最新新闻</a>
                    </div>
                    <div style="float:right;margin-right:4px;margin-top:10px;width:15px;height:15px;">
                        <img src="../Compents/images/news/right-triangle-news_06.png" id="img_xwzxtwo" style="display:none;"/>
                        <img src="../Compents/images/news/right-triangle-news_06.png" id="img_xwzxtwomove" style="display:none;"/>
                    </div>
                </div>
            </div> 
            <div style="width:1px;height:630px;border-left:1px solid #EEEEEE;margin-left:5px;float:left;">
            </div>
            <div style="clear:both;width:248px;margin-left:5px;border-bottom:1px solid #EEEEEE;">
            </div>
        </div>
        <div id="div_titleAll" style="float:right;margin-left:10px;margin-right:10px;min-height:668px;">
            <div style="width:100%;">
                <div style="float:left;">
                    <img src="../Compents/images/news/right-list-news01_05.png" />
                </div>
                <div id="div_lineimg" style="float:left;background:url(../Compents/images/news/right-list-news03_07.png);height:41px;">
                    <div style="margin-top:20px;float:left;">
                        <img src="../Compents/images/news/blue-square-news_06.png"/>
                    </div>
                    <div id="div_lefttitle" style="margin-top:18px;float:left;margin-left:12px;font-family:宋体;font-size:14px;color:#2D9ACD;font-weight:bold;">
                        通知通报
                    </div>
                    <div style="margin-top:18px;float:right;margin-right:5px;font-family:宋体;font-size:13px;color:#2D9ACD;">
                        <a style="cursor:pointer;color:#2D9ACD;text-decoration:none;"  id="a_returnUppage">返回上一页>></a>
                    </div>
                </div>
                <div style="float:left;">
                    <img src="../Compents/images/news/right-list-news02_07.png" />
                </div>
            </div>
            <div style="width:100%;height:auto;">
                <div id="div_newstitle" style="width:100%;padding-top:45px;font-family:宋体;font-size:16px;font-weight:bold;color:#666666;text-align:center;" >
                    
                </div>
                <div id="div_newsfrom" style="margin-left:16px;margin-right:16px;padding-top:10px;margin-top:20px;border-top:1px dashed #999999;font-family:宋体;font-size:12px;color:#999999;text-align:center;" >
                    <span>发布人：</span><span id="newsUser"></span><span style="margin-left:15px;">发布时间：</span><span  id="newsDate"></span>
                </div>
                <div id="div_newscontent" style="height:auto;margin-top:40px;overflow:hidden;padding-left:40px;padding-right:34px;color:#666666;font-size:12px;font-family:宋体;" >
                    
                </div>
            </div>
            <div style="width:100%;padding-top:40px;">
                <div style="background:#F7F7F7;margin-left:40px;margin-right:34px;">
                    <div style="float:left;background:url(../Compents/images/news/yellow-Color-piece-news_22.png) no-repeat;width:101px;height:28px;padding-left:23px;line-height:28px;color:white;font-size:12px;font-family:宋体;">
                        上一篇：
                    </div>
                    <div style="float:left;margin-left:10px;line-height:28px;color:white;font-size:12px;font-family:宋体;color:#666666">
                        <a id="a_beforenews" style="color:white;font-size:12px;font-family:宋体;color:#666666;text-decoration:none;"></a>
                    </div>
                </div>
                <div style="clear:both;"></div>
                <div style="margin-top:10px;margin-left:40px;margin-right:34px;background:#F7F7F7;">
                    <div style="float:left;background:url(../Compents/images/news/yellow-Color-piece-news_22.png) no-repeat;width:101px;height:28px;padding-left:23px;line-height:28px;color:white;font-size:12px;font-family:宋体;">
                        下一篇：
                    </div>
                    <div style="float:left;margin-left:10px;line-height:28px;color:white;font-size:12px;font-family:宋体;color:#666666">
                        <a id="a_nextnews" style="color:white;font-size:12px;font-family:宋体;color:#666666;text-decoration:none;"></a>
                    </div>
                </div>
            </div>
        </div>
        <div style="clear:both;display:block;height:0;"></div>
    </div>
</body>
</html>
<script type="text/javascript">
    $("#a_tztb").click(function () {
        tztb();
        location.href = encodeURI("NewsList.htm?newstype=通知");
    });
    function tztb() {
        $("#img_tztbonemove").hide(); $("#img_tztbtwomove").hide();
        $("#img_tztbone").show(); $("#img_tztbtwo").show();
        $("#img_xwzxone").hide(); $("#img_xwzxtwo").hide();
        $("#div_tjtb").css("color", "#2D9ACD"); $("#div_xwzx").css("color", "#666666");
        $("#div_lefttitle").html("通知通报");
    }

    $("#a_xwzx").click(function () {
        xwzx();
        location.href = encodeURI("NewsList.htm?newstype=新闻");
    });
    function xwzx() {
        $("#img_xwzxonemove").hide(); $("#img_xwzxtwomove").hide();
        $("#img_xwzxone").show(); $("#img_xwzxtwo").show();
        $("#img_tztbone").hide(); $("#img_tztbtwo").hide();
        $("#div_tjtb").css("color", "#666666"); $("#div_xwzx").css("color", "#2D9ACD");
        $("#div_lefttitle").html("最新新闻");
    }

    $("#a_tztb").mousemove(function () {
        if ($("#img_tztbone").css("display") == "none") {
            $("#img_tztbonemove").show(); $("#img_tztbtwomove").show();
            $("#a_tztb").mouseout(function () {
                $("#img_tztbonemove").hide(); $("#img_tztbtwomove").hide();
            });
        }
    });
    $("#a_xwzx").mouseover(function () {
        if ($("#img_xwzxone").css("display") == "none") {
            $("#img_xwzxonemove").show(); $("#img_xwzxtwomove").show();
            $("#a_xwzx").mouseout(function () {
                $("#img_xwzxonemove").hide(); $("#img_xwzxtwomove").hide();
            });
        } 
    });


    function getnewsDetail(newsid) {
        $.ajax({
            //url: 'http://' + urlIP1 + '/News/post/newsinformation',//调用c#的
            url: 'http://' + urlIP + '/Foms_RestFul/rest/News/newsinformation',
            type: "POST",
            data: { 'newsid': newsid },
            async: false,
            success: function (data) {
				var a=data.newsUser;
                $("#div_newstitle").html(a.NEWSTITLE);
                $("#newsDate").html(a.CREATEDATE);
                $("#div_newscontent").html(a.NEWSCONTENT);
                $("#newsUser").html(a.TRUENAME);

				//修改，这个是原来的，没有修改sql的
//				var a = eval("(" + data + ")");
//				 $("#div_newstitle").html(a.title);
//                $("#newsDate").html(a.releasedate);
//                $("#div_newscontent").html(a.content);
//                $("#newsUser").html(a.releasename);
			
            },error:function(msg,a){
				alert("错误getnewsDetail是="+msg+"++aa:"+a)
			} 
			
        });
    }

    function getnewsbeforenext(newsid,newstype) {
        $.ajax({
			//url: 'http://' + urlIP1 + '/News/post/newsbeforenext',
			url: 'http://' + urlIP + '/Foms_RestFul/rest/News/newsbeforenext',
            type: "POST",
            data: { 'newsid': newsid, 'newstype': newstype },
            async: false,
            success: function (data) {
                $("#a_returnUppage").attr("onclick", "returnUppage('"+newstype+"')");
                if (data.beforeid==undefined && data.nextid == undefined) {
                    $("#a_beforenews").html("暂无上一篇"); $("#a_beforenews").removeClass("anextbefore");
                    $("#a_nextnews").html("暂无下一篇"); $("#a_nextnews").removeClass("anextbefore");
                    $("#a_nextnews").removeAttr("onclick"); $("#a_beforenews").removeAttr("onclick");
                } else if (data.beforeid==undefined && data.nextid!="") {
                    $("#a_beforenews").html("暂无上一篇"); $("#a_beforenews").removeClass("anextbefore");
                    $("#a_nextnews").html(data.nexttitle); $("#a_nextnews").addClass("anextbefore");
                    $("#a_nextnews").attr("onclick", "nextbeforeClick(" + data.nextid + ",'" + newstype + "')"); $("#a_beforenews").removeAttr("onclick");
                } else if (data.beforeid!="" && data.nextid==undefined) {
                    $("#a_nextnews").html("暂无下一篇"); $("#a_nextnews").removeClass("anextbefore");
                    $("#a_beforenews").html(data.beforetitle); $("#a_beforenews").addClass("anextbefore");
                    $("#a_beforenews").attr("onclick", "nextbeforeClick(" + data.beforeid + ",'" + newstype + "')"); $("#a_nextnews").removeAttr("onclick"); 
                } else if (data.beforeid!="" && data.nextid!="") {
                    $("#a_beforenews").html(data.beforetitle); $("#a_beforenews").addClass("anextbefore");
                    $("#a_nextnews").html(data.nexttitle); $("#a_nextnews").addClass("anextbefore");
                    $("#a_beforenews").attr("onclick", "nextbeforeClick(" + data.beforeid + ",'" + newstype + "')");
                    $("#a_nextnews").attr("onclick", "nextbeforeClick(" + data.nextid + ",'" + newstype + "')");
                }
            },error:function(msg,a){
				alert("错误getnewsbeforenext是="+msg+"++aa:"+a)
			} 
        });
    }

    $(document).ready(function () {
		//NewsList传过来的id
        var newsid = decodeURI(request("newsid"));
        var newstype = decodeURI(request("newstype"));
        if (newstype == "新闻") {
            $("#div_lefttitle").html("最新新闻"); xwzx();
        } else if (newstype == "通知") {
            $("#div_lefttitle").html("通知通报"); tztb();
        } else {
            location.href = "HomePage.htm";
        }
        getnewsDetail(newsid);
        getnewsbeforenext(newsid, newstype);
    });

    function returnUppage(type) {
        location.href = encodeURI("NewsList.htm?newstype="+type);
    }

    function nextbeforeClick(newsid, newstype) {
        getnewsDetail(newsid);
        getnewsbeforenext(newsid, newstype);
    }

    Resize = function () {
        var winWidth = $(window).width();
        $("#div_newsshow").css("width", (winWidth - 30) + "px");
        $("#div_titleAll").css("width", (Number($("#div_newsshow").css("width").replace("px", "")) - 278) + "px");
        var newwidth = Number($("#div_titleAll").css("width").replace("px", "")) - 52;
        $("#div_lineimg").css("width", newwidth + "px");
    }

    function request(paras) { 
        var url = location.href;
        var paraString = url.substring(url.indexOf("?") + 1, url.length).split("&");
        var paraObj = {}
        for (i = 0; j = paraString[i]; i++) {
            paraObj[j.substring(0, j.indexOf("=")).toLowerCase()] = j.substring(j.indexOf("=") + 1, j.length);
        }
        var returnValue = paraObj[paras.toLowerCase()];
        if (typeof (returnValue) == "undefined") {
            return "";
        } else {
            return returnValue;
        }
    }

    
</script>